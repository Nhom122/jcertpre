<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Xem lại bài thi: <span th:text="${exam.title}">Tiêu đề</span></title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        .correct { color: green; font-weight: bold; }
        .wrong { color: red; font-weight: bold; }
    </style>
</head>
<body>
<div class="container mt-4">
    <h2>🔍 Xem lại bài thi: <span th:text="${exam.title}"></span></h2>
    <p><strong>Mô tả:</strong> <span th:text="${exam.description}"></span></p>
    <p><strong>Điểm đạt được:</strong> <span th:text="${examResult.score}"></span> / <span th:text="${exam.totalPoints}"></span></p>

    <div th:each="question, iterStat : ${exam.questions}">
        <div class="card mb-3">
            <div class="card-body">
                <h5 th:text="'Câu ' + (${iterStat.index} + 1) + ': ' + question.text"></h5>

                <ul>
                    <li th:each="opt : ${question.options}"
                        th:text="opt"
                        th:classappend="${opt == examResult.answers[iterStat.index]} ? 'font-weight-bold' : ''">
                        Option
                    </li>
                </ul>

                <p>
                    <strong>Đáp án học viên:</strong>
                    <span th:text="${examResult.answers[iterStat.index]}"></span>
                </p>
                <p>
                    <strong>Đáp án đúng:</strong>
                    <span th:text="${question.correctAnswer}" class="correct"></span>
                </p>
                <p th:if="${examResult.answers[iterStat.index] == question.correctAnswer}">
                    <span class="correct">Bạn trả lời đúng ✔️</span>
                </p>
                <p th:if="${examResult.answers[iterStat.index] != question.correctAnswer}">
                    <span class="wrong">Bạn trả lời sai ✘</span>
                </p>
            </div>
        </div>
    </div>

    <a th:href="@{/exam/take/{id}(id=${exam.id})}" class="btn btn-primary">Thi lại</a>
    <a th:href="@{/exam/list}" class="btn btn-secondary">Về danh sách đề thi</a>
</div>
</body>
</html>
