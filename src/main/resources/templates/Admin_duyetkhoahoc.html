<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>üìò Duy·ªát Kh√≥a H·ªçc</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f9fafb;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh;
      padding: 30px 50px;
    }

    h2 {
      color: #4f46e5;
      font-weight: 700;
      margin-bottom: 25px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* N√∫t quay l·∫°i */
    .btn-back {
      margin-bottom: 25px;
      font-weight: 600;
      border-radius: 25px;
      padding: 8px 20px;
      color: #4f46e5;
      border: 2px solid #4f46e5;
      background: transparent;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: 0 3px 10px rgba(79, 70, 229, 0.3);
    }

    .btn-back:hover {
      background-color: #4f46e5;
      color: white;
      box-shadow: 0 6px 20px rgba(79, 70, 229, 0.6);
      text-decoration: none;
    }

    table {
      width: 100%;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      background: white;
    }

    thead tr {
      background: #4f46e5;
      color: white;
      font-weight: 600;
    }

    tbody tr:hover {
      background-color: #eef2ff;
      transition: background-color 0.2s ease;
    }

    th, td {
      padding: 14px 18px;
      text-align: left;
      vertical-align: middle;
      border-bottom: 1px solid #ddd;
    }

    /* N√∫t h√†nh ƒë·ªông */
    .btn-sm {
      font-weight: 600;
      border-radius: 6px;
      padding: 6px 14px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      transition: all 0.2s ease;
    }

    .btn-success:hover {
      background-color: #4338ca;
      box-shadow: 0 5px 12px rgba(67, 56, 202, 0.5);
    }

    .btn-danger:hover {
      background-color: #b91c1c;
      box-shadow: 0 5px 12px rgba(185, 28, 28, 0.5);
    }

    /* Modal */
    .modal-header {
      background-color: #4f46e5;
      color: white;
      font-weight: 700;
    }

    .modal-footer .btn-danger,
    .modal-footer .btn-secondary {
      width: 100px;
    }
  </style>
</head>
<body>

<a th:href="@{/admin/dashboard}" class="btn-back">
  <i class="fas fa-arrow-left"></i> Quay l·∫°i trang ch·ªß qu·∫£n tr·ªã
</a>

<h2><i class="fas fa-book"></i> Danh s√°ch kh√≥a h·ªçc ch·ªù duy·ªát</h2>

<table class="table table-hover">
  <thead>
  <tr>
    <th>ID</th>
    <th>T√™n kh√≥a h·ªçc</th>
    <th>Gi·∫£ng vi√™n</th>
    <th style="min-width: 170px;">H√†nh ƒë·ªông</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="course : ${pendingCourses}">
    <td th:text="${course.id}"></td>
    <td th:text="${course.title}"></td>
    <td th:text="${course.instructor.fullName}"></td>
    <td>
      <!-- Duy·ªát -->
      <form th:action="@{/admin/courses/approve/{id}(id=${course.id})}" method="post" style="display:inline-block;">
        <button type="submit" class="btn btn-success btn-sm" title="Duy·ªát kh√≥a h·ªçc">
          <i class="fas fa-check"></i> Duy·ªát
        </button>
      </form>

      <!-- T·ª´ ch·ªëi -->
      <button type="button"
              class="btn btn-danger btn-sm"
              data-toggle="modal"
              th:data-target="'#rejectModal' + ${course.id}"
              title="T·ª´ ch·ªëi kh√≥a h·ªçc">
        <i class="fas fa-times"></i> T·ª´ ch·ªëi
      </button>

      <!-- Modal nh·∫≠p l√Ω do t·ª´ ch·ªëi -->
      <div class="modal fade" th:id="'rejectModal' + ${course.id}" tabindex="-1" role="dialog" aria-labelledby="rejectModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <form th:action="@{/admin/courses/reject/{id}(id=${course.id})}" method="post">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="rejectModalLabel">Nh·∫≠p l√Ω do t·ª´ ch·ªëi</h5>
                <button type="button" class="close text-white" data-dismiss="modal" aria-label="ƒê√≥ng">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <textarea name="reason" class="form-control" rows="4" placeholder="Nh·∫≠p l√Ω do t·ª´ ch·ªëi..." required></textarea>
              </div>
              <div class="modal-footer">
                <button type="submit" class="btn btn-danger">G·ª≠i t·ª´ ch·ªëi</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">H·ªßy</button>
              </div>
            </div>
          </form>
        </div>
      </div>

    </td>
  </tr>
  </tbody>
</table>

<!-- Bootstrap & jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" ></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
